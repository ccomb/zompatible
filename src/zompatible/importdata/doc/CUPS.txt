======
 CUPS
======

Le module `cups` est en charge de récupérer les données de compatibilité des
imprimantes avec CUPS[#] depuis le site OpenPrinting[#] et de fournir une
interface simple pour y accéder afin de mettre à jour une base de données
locale.

.. contents: Index

TODO: we should not need to specify *zompatible.importdata.cups* but only
*cups* (it used to work on OSX but not on Linux ???).

First, we instanciate the CUPS import object. For test purpose, we specify a
local sample file. For nrmal use, just leave parenthesis empty::

    >>> import os
    >>> from zompatible.importdata.cups import cups_import_factory
    >>> cups_import = cups_import_factory(in_printers_file=os.path.join(path,"printers_sample.xml"), in_manufacturers_file=os.path.join(path,"manufacturers_sample.xml"))

Now, we can access printers reports (see interfaces.ICupsPrinter to know object
attributes provided by cups_import.printers() generator)::

    >>> printers = cups_import.printers()
    >>> for printer in printers:   print "%s compatibility level: %s" % (printer.identity, printer.compatibility)
    Alps-MD-1000 compatibility level: A
    Apollo-P-1220_Barbie compatibility level: A
    Samsung-ML-4600 compatibility level: A

Accessing the manufacturer list from CUPS::

    >>> manufacturers = cups_import.manufacturers()
    >>> for manuf in manufacturers: print manuf.name
    Alps
    Anitech
    Apollo
    Apple
    ...

..[#] Common Unix Printing System
..[#] voir https://www.linux-foundation.org/en/OpenPrinting/Database/Query
